# MCP Configuration Files

This directory contains configuration files for MCP (Model Context Protocol) servers used by AI assistants (like Cursor AI) to interact with the Lock-in codebase.

## File Categories

### Auto-Generated Files (Do Not Edit Manually)

These files are automatically generated by `tools/mcp/scripts/update-mcp-docs.ps1` and should **never be edited manually**. They are regenerated from the codebase structure:

- **`db-server-config.json`** - Database server configuration
  - Source: Extracted from `DATABASE.MD` (table names)
  - Contains: Allowed tables, security settings, rate limits
  - Updated when: New database tables are added (update `DATABASE.MD` first)

- **`files-server-config.json`** - Filesystem server configuration
  - Source: Scanned from repository structure
  - Contains: Allowed/excluded file paths, security boundaries
  - Updated when: New file types or folders are added to the repo

- **`build-server-config.json`** - Build command server configuration
  - Source: Extracted from `package.json` scripts
  - Contains: Allowed npm scripts, timeouts, rate limits
  - Updated when: New npm scripts are added to `package.json`

- **`docs-server-config.json`** - Documentation search server configuration
  - Source: Indexed from markdown files in repository
  - Contains: Indexed documentation paths, search settings
  - Updated when: New documentation files are added

**To update these files:**
1. Make your code changes (add table, script, file type, or doc)
2. Run `npm run mcp:docs:draft` to preview changes
3. Review generated configs
4. Run `npm run mcp:docs:publish` to stage for commit

### Template Files (Copy and Customize)

These are templates for setting up your local MCP configuration. Copy them to the appropriate location and customize with your paths:

- **`mcp.json.template`** - Simple MCP configuration template
  - Purpose: Manual setup with hardcoded paths
  - Usage: Copy to `.cursor/mcp.json` and update paths
  - Referenced in: `QUICK_START.md`

- **`mcp-config-template.json`** - Advanced MCP configuration template
  - Purpose: Uses environment variables for paths (better for automation)
  - Usage: Used by setup scripts, or copy and replace `${VARIABLE}` placeholders
  - Variables: `${LOCKIN_REPO_ROOT}`, `${EXTENSION_PATH}`, `${SUPABASE_READONLY_CONNECTION_STRING}`

- **`mcp-config-windows.json`** - Windows-specific MCP configuration
  - Purpose: Pre-configured for Windows paths
  - Usage: Copy to `.cursor/mcp.json` and update paths if needed
  - Referenced in: `SETUP.md`

- **`mcp-config-linux.json`** - Linux/Ubuntu-specific MCP configuration
  - Purpose: Pre-configured for Linux paths
  - Usage: Copy to `.cursor/mcp.json` and update paths if needed
  - Referenced in: `SETUP.md`

- **`env.local.template`** - Environment variables template
  - Purpose: Template for `.env.local` file (user-specific, not committed)
  - Usage: Copy to `.env.local` in repo root and fill in values
  - Contains: Supabase connection string, repository paths
  - Referenced in: `SETUP.md`

## File Naming Conventions

- **`*-server-config.json`** - Auto-generated server configurations (do not edit)
- **`mcp-config-*.json`** - OS-specific MCP configuration templates
- **`*.template`** - Template files (copy and customize)
- **`env.local.template`** - Environment variable template

## Updating Configurations

### When Adding New Features

**Database Tables:**
1. Add migration in `backend/migrations/`
2. Update `DATABASE.MD` with new table schema
3. Run `npm run mcp:docs:draft` → Review → `npm run mcp:docs:publish`

**NPM Scripts:**
1. Add script to `package.json`
2. Run `npm run mcp:docs:draft` → Review → `npm run mcp:docs:publish`
3. Script will be automatically included if it matches safe patterns (build, test, lint, type-check, verify, check)

**File Types/Folders:**
1. Add new files/folders to repository
2. Run `npm run mcp:docs:draft` → Review → `npm run mcp:docs:publish`
3. Config will be updated with new paths if they match allowed patterns

**Documentation:**
1. Add new markdown files
2. Run `npm run mcp:docs:draft` → Review → `npm run mcp:docs:publish`
3. New docs will be automatically indexed

## Important Notes

- **Never edit auto-generated files manually** - They will be overwritten
- **Always run `-Draft` first** - Preview changes before committing
- **Review generated configs** - Ensure they match your expectations
- **Commit configs with code** - MCP configs should be committed alongside feature code
- **User-specific configs are gitignored** - `.cursor/mcp.json` and `.env.local` are not committed

## Related Documentation

- **Setup Guide**: `../README.md` - Complete MCP setup instructions
- **Feature Workflow**: `../docs/FEATURE_WORKFLOW.md` - Detailed workflow for updating MCP configs
- **Usage Guidelines**: `../docs/USAGE_GUIDELINES.md` - Best practices for AI assistants
- **Troubleshooting**: `../docs/TROUBLESHOOTING.md` - Common issues and solutions

