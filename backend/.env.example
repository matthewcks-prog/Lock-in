# =============================================================================
# Lock-in Backend - Environment Variables Template
# =============================================================================
# Copy to .env and fill in real values. This file is version-controlled.
# =============================================================================

# -----------------------------------------------------------------------------
# ENVIRONMENT (REQUIRED)
# -----------------------------------------------------------------------------
NODE_ENV=development

# -----------------------------------------------------------------------------
# DATABASE - Supabase (REQUIRED)
# -----------------------------------------------------------------------------
# Set ONLY the variables for your target environment (dev OR prod, not both)

# Development/Staging
SUPABASE_URL_DEV=https://your-dev-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY_DEV=eyJhbGc...(dev-service-role-key)
SUPABASE_ANON_KEY_DEV=eyJhbGc...(dev-anon-key)

# Production (set in Azure Container Apps, not local .env)
# SUPABASE_URL_PROD=https://your-prod-project.supabase.co
# SUPABASE_SERVICE_ROLE_KEY_PROD=eyJhbGc...(prod-service-role-key)
# SUPABASE_ANON_KEY_PROD=eyJhbGc...(prod-anon-key)

# -----------------------------------------------------------------------------
# AI PROVIDERS
# -----------------------------------------------------------------------------

# Gemini (PRIMARY for chat completions) - https://aistudio.google.com/apikey
# Model hierarchy: gemini-2.0-flash → gemini-2.5-flash → gemini-2.5-pro
GEMINI_API_KEY=AIzaSy...
GEMINI_MODEL=gemini-2.0-flash
GEMINI_UPGRADED_MODEL=gemini-2.5-flash
GEMINI_PREMIUM_MODEL=gemini-2.5-pro

# Groq (SECONDARY FALLBACK for chat) - https://console.groq.com/keys
# Model hierarchy: llama-3.1-8b-instant → llama-3.3-70b-versatile
GROQ_API_KEY=gsk_...
GROQ_MODEL=llama-3.1-8b-instant
GROQ_FALLBACK_MODEL=llama-3.3-70b-versatile

# OpenAI (TERTIARY FALLBACK for chat) - https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-...
OPENAI_MODEL=gpt-4o-mini

# Azure OpenAI (Embeddings & Transcription) - Azure Portal
AZURE_OPENAI_API_KEY=your-azure-key-here
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_EMBEDDINGS_DEPLOYMENT=text-embedding-3-small
AZURE_OPENAI_TRANSCRIPTION_DEPLOYMENT=whisper-1

# -----------------------------------------------------------------------------
# SERVER
# -----------------------------------------------------------------------------
PORT=3000

# -----------------------------------------------------------------------------
# OBSERVABILITY (OPTIONAL)
# -----------------------------------------------------------------------------
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# SENTRY_ENABLED=true
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=xxx;...
# LOG_LEVEL=info

# -----------------------------------------------------------------------------
# RATE LIMITING (OPTIONAL)
# -----------------------------------------------------------------------------
# DAILY_REQUEST_LIMIT=100
# CHAT_LIST_LIMIT=20
# MAX_CHAT_LIST_LIMIT=100

# -----------------------------------------------------------------------------
# STORAGE - Supabase Buckets (OPTIONAL)
# -----------------------------------------------------------------------------
# NOTE_ASSETS_BUCKET=note-assets
# NOTE_ASSETS_MAX_BYTES=10485760
# CHAT_ASSETS_BUCKET=chat-assets
# CHAT_ASSETS_MAX_BYTES=10485760
# CHAT_ASSET_DAILY_UPLOAD_LIMIT=50
# CHAT_ASSET_DAILY_UPLOAD_BYTES_LIMIT=104857600
# CHAT_ASSET_SIGNED_URL_TTL_SECONDS=600

# -----------------------------------------------------------------------------
# TRANSCRIPTION (OPTIONAL)
# -----------------------------------------------------------------------------
# TRANSCRIPTION_SEGMENT_MAX_MB=24
# TRANSCRIPTION_TEMP_DIR=/tmp/transcripts
# TRANSCRIPT_CHUNK_MAX_BYTES=8388608
# TRANSCRIPT_DAILY_JOB_LIMIT=20
# TRANSCRIPT_MAX_CONCURRENT_JOBS=3
# TRANSCRIPT_MAX_TOTAL_BYTES=536870912
# TRANSCRIPT_MAX_DURATION_MINUTES=180
# TRANSCRIPT_JOBS_BUCKET=transcript-jobs
