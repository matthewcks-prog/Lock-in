#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
set -e

echo "Running pre-commit checks..."

# Format check (fast)
npm run format:check || { echo "Format check failed. Run 'npm run format'"; exit 1; }

# Type check (fast)
npm run type-check || { echo "Type check failed"; exit 1; }

# Lint (medium)
npm run lint:all || { echo "Lint failed"; exit 1; }

# Architecture check (fast)
npm run lint:deps || { echo "Architecture violation detected"; exit 1; }

# Tests for changed files only (fast)
npm run test -- --changed --passWithNoTests || { echo "Tests failed"; exit 1; }

echo "Pre-commit checks passed"
