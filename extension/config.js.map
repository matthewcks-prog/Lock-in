{"version":3,"file":"config.js","sources":["src/config.ts"],"sourcesContent":["/**\n * Extension Runtime Configuration\n *\n * Environment-aware configuration injected at build time via Vite.\n * Set VITE_APP_ENV=production for prod builds, defaults to development.\n *\n * Build commands:\n * - Development: npm run build (uses DEV Supabase)\n * - Production: VITE_APP_ENV=production npm run build (uses PROD Supabase)\n */\n(function () {\n  type LockInConfig = {\n    APP_ENV: string;\n    IS_PRODUCTION: boolean;\n    BACKEND_URL: string;\n    SUPABASE_URL: string;\n    SUPABASE_ANON_KEY: string;\n    SUPABASE_ENVIRONMENT: 'development' | 'production';\n    SESSION_STORAGE_KEY: string;\n    TOKEN_EXPIRY_BUFFER_MS: number;\n    DEBUG_PANOPTO_RESOLVER: boolean;\n    DEBUG?: string;\n    SENTRY_DSN?: string;\n  };\n\n  const root = (typeof window !== 'undefined' ? window : self) as typeof globalThis & {\n    LOCKIN_CONFIG?: LockInConfig;\n  };\n  if (root.LOCKIN_CONFIG) {\n    return;\n  }\n\n  const appEnv = (import.meta.env.VITE_APP_ENV || 'development').toLowerCase();\n  const isProduction = appEnv === 'production';\n\n  const configByEnv = {\n    development: {\n      url: import.meta.env.VITE_SUPABASE_URL_DEV || '',\n      anonKey: import.meta.env.VITE_SUPABASE_ANON_KEY_DEV || '',\n      environment: 'development',\n      backendUrl: import.meta.env.VITE_BACKEND_URL_DEV || 'http://localhost:3000',\n    },\n    production: {\n      url: import.meta.env.VITE_SUPABASE_URL_PROD || '',\n      anonKey: import.meta.env.VITE_SUPABASE_ANON_KEY_PROD || '',\n      environment: 'production',\n      backendUrl:\n        import.meta.env.VITE_BACKEND_URL_PROD ||\n        'https://lock-in-backend.australiaeast.azurecontainerapps.io',\n    },\n  } as const;\n\n  const supabaseConfig = isProduction ? configByEnv.production : configByEnv.development;\n  const missingEnvVars: string[] = [];\n\n  if (!supabaseConfig.url) {\n    missingEnvVars.push(isProduction ? 'VITE_SUPABASE_URL_PROD' : 'VITE_SUPABASE_URL_DEV');\n  }\n  if (!supabaseConfig.anonKey) {\n    missingEnvVars.push(\n      isProduction ? 'VITE_SUPABASE_ANON_KEY_PROD' : 'VITE_SUPABASE_ANON_KEY_DEV',\n    );\n  }\n\n  root.LOCKIN_CONFIG = {\n    APP_ENV: appEnv,\n    IS_PRODUCTION: isProduction,\n    BACKEND_URL: supabaseConfig.backendUrl,\n    SUPABASE_URL: supabaseConfig.url,\n    SUPABASE_ANON_KEY: supabaseConfig.anonKey,\n    SUPABASE_ENVIRONMENT: supabaseConfig.environment,\n    SESSION_STORAGE_KEY: 'lockinSupabaseSession',\n    TOKEN_EXPIRY_BUFFER_MS: 60000,\n    DEBUG_PANOPTO_RESOLVER: !isProduction,\n    DEBUG: import.meta.env.VITE_DEBUG || undefined,\n    SENTRY_DSN: import.meta.env.VITE_SENTRY_DSN || undefined,\n  };\n\n  if (missingEnvVars.length > 0 && typeof console !== 'undefined') {\n    console.warn('[Lock-in] Missing extension env vars:', missingEnvVars);\n  }\n\n  if (!isProduction && typeof console !== 'undefined') {\n    console.log('[Lock-in] Extension config loaded:', {\n      environment: appEnv,\n      supabase: supabaseConfig.environment,\n      backendUrl: root.LOCKIN_CONFIG.BACKEND_URL,\n    });\n  }\n})();\n"],"names":[],"mappings":";;GAUC,WAAY;AAeX,UAAM,OAAQ,OAAO,WAAW,cAAc,SAAS;AAGvD,QAAI,KAAK,eAAe;AACtB;AAAA,IACF;AAEA,UAAM,SAA0C,cAAe,YAAA;AAC/D,UAAM,eAAe,WAAW;AAEhC,UAAM,cAAc;AAAA,MAClB,aAAa;AAAA,QACX,KAA8C;AAAA,QAC9C,SAAuD;AAAA,QACvD,aAAa;AAAA,QACb,YAAoD;AAAA,MAAA;AAAA,MAEtD,YAAY;AAAA,QACV,KAA+C;AAAA,QAC/C,SAAwD;AAAA,QACxD,aAAa;AAAA,QACb,YAEE;AAAA,MAAA;AAAA,IACJ;AAGF,UAAM,iBAAiB,eAAe,YAAY,aAAa,YAAY;AAC3E,UAAM,iBAA2B,CAAA;AAER;AACvB,qBAAe,KAAK,eAAe,2BAA2B,uBAAuB;AAAA,IACvF;AAC6B;AAC3B,qBAAe;AAAA,QACb,eAAe,gCAAgC;AAAA,MAAA;AAAA,IAEnD;AAEA,SAAK,gBAAgB;AAAA,MACnB,SAAS;AAAA,MACT,eAAe;AAAA,MACf,aAAa,eAAe;AAAA,MAC5B,cAAc,eAAe;AAAA,MAC7B,mBAAmB,eAAe;AAAA,MAClC,sBAAsB,eAAe;AAAA,MACrC,qBAAqB;AAAA,MACrB,wBAAwB;AAAA,MACxB,wBAAwB,CAAC;AAAA,MACzB,OAAqC;AAAA,MACrC,YAA+C;AAAA,IAAA;AAGjD,QAAI,eAAe,SAAS,KAAK,OAAO,YAAY,aAAa;AAC/D,cAAQ,KAAK,yCAAyC,cAAc;AAAA,IACtE;AAEA,QAAI,CAAC,gBAAgB,OAAO,YAAY,aAAa;AACnD,cAAQ,IAAI,sCAAsC;AAAA,QAChD,aAAa;AAAA,QACb,UAAU,eAAe;AAAA,QACzB,YAAY,KAAK,cAAc;AAAA,MAAA,CAChC;AAAA,IACH;AAAA,EACF,GAAA;;"}